"use strict";var u=Object.create;var s=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var l=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var m=(r,t)=>{for(var n in t)s(r,n,{get:t[n],enumerable:!0})},o=(r,t,n,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of g(t))!_.call(r,i)&&i!==n&&s(r,i,{get:()=>t[i],enumerable:!(e=d(t,i))||e.enumerable});return r};var I=(r,t,n)=>(n=r!=null?u(l(r)):{},o(t||!r||!r.__esModule?s(n,"default",{value:r,enumerable:!0}):n,r)),A=r=>o(s({},"__esModule",{value:!0}),r);var y={};m(y,{getAccessToken:()=>b,getActiveSubscription:()=>f,getPlans:()=>P});module.exports=A(y);var p=I(require("jsonwebtoken"),1),c=process.env.SAAZPAY_CLIENT_KEY,a=process.env.SAAZPAY_BASE_URL,b=({appId:r,userId:t,expiresIn:n=60})=>{if(!c)throw new Error("Saazpay secret key is not defined");let e=`-----BEGIN PRIVATE KEY-----
${c}
-----END PRIVATE KEY-----`;return p.default.sign({userId:t,appId:r},e,{expiresIn:n,algorithm:"ES256"})},P=async({appId:r})=>{if(!a)throw new Error("Saazpay base URL is not defined");return await fetch(`${a}/api/v1/plans?id=${r}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.SAAZPAY_API_KEY}`}}).then(n=>n.json()).catch(n=>(console.error(n),[]))},f=async({appId:r,userId:t})=>{if(!a)throw new Error("Saazpay base URL is not defined");return await fetch(`${a}/api/v1/subscriptions?appId=${r}&userId=${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.SAAZPAY_API_KEY}`}}).then(e=>e.json()).catch(e=>(console.error(e),[]))};0&&(module.exports={getAccessToken,getActiveSubscription,getPlans});
//# sourceMappingURL=index.cjs.map